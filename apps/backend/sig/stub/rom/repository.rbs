module ROM
  class Repository
    type relation = ::ROM::Relation

    # Adapter binding like ROM::Repository[:users]
    def self.[]: (Symbol) -> singleton(Repository)

    # ROM command DSL macro. Accepts symbols and/or keyword mapping like update: :by_pk
    def self.commands: (*Symbol | Hash[Symbol, Symbol]) -> void

    # Typical relation accessors (projects often define methods per relation name)
    # We declare a generic one for `users` used in this project.
    def users: () -> relation

    # Common command instance methods declared by `commands` macro
    def create: (untyped) -> untyped
    def update: (untyped, untyped) -> untyped
    def delete: (untyped) -> untyped
  end
end
